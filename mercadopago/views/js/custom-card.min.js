!function(){var r={},o={},i={site_id:""},l={select_choose:""},t="";function e(e){p(),u(),y(),document.getElementById("mp-doc-div-title").style.display="none",document.getElementById("mp-doc-div").style.display="none",document.getElementById("mp-doc-type-div").style.display="none",document.getElementById("mp-doc-number-div").style.display="none",document.getElementById("id-docType").innerHTML="",document.getElementById("id-doc-number").value="";var t=s();t.length<6?document.getElementById("id-card-number").style.background="no-repeat #fff":"keyup"===e.type?6<=t.length&&Mercadopago.getPaymentMethod({bin:t},n):setTimeout(function(){6<=t.length&&Mercadopago.getPaymentMethod({bin:t},n)},100)}function n(e,t){200===e?(r=t[0],t=r.id,document.getElementById("payment_method_id").value=t,t=r.secure_thumbnail,document.getElementById("id-card-number").style.background="url("+t+") 98% 50% no-repeat #fff",function(e){o={issuer:!1,cardholder_name:!1,cardholder_identification_type:!1,cardholder_identification_number:!1};for(var t=0;t<e.length;t++)"issuer_id"===e[t]&&(o.issuer=!0),"cardholder_name"===e[t]&&(o.cardholder_name=!0),"cardholder_identification_type"===e[t]&&(o.cardholder_identification_type=!0),"cardholder_identification_number"===e[t]&&(o.cardholder_identification_number=!0)}(r.additional_info_needed),o.cardholder_name?document.getElementById("mp-card-holder-div").style.display="block":document.getElementById("mp-card-holder-div").style.display="none",o.issuer?(document.getElementById("container-issuers").style.display="block",document.getElementById("container-installments").classList.remove("col-md-12"),document.getElementById("container-installments").classList.add("col-md-8"),Mercadopago.getIssuers(r.id,s(),d)):(p(),c()),o.cardholder_identification_type?(document.getElementById("mp-doc-div-title").style.display="block",document.getElementById("mp-doc-div").style.display="block",document.getElementById("mp-doc-type-div").style.display="block",Mercadopago.getIdentificationTypes()):document.getElementById("mp-doc-type-div").style.display="none",o.cardholder_identification_number?(document.getElementById("mp-doc-div-title").style.display="block",document.getElementById("mp-doc-div").style.display="block",document.getElementById("mp-doc-number-div").style.display="block"):document.getElementById("mp-doc-number-div").style.display="none",o.cardholder_identification_type||o.cardholder_identification_number||(document.getElementById("mp-doc-div-title").style.display="none",document.getElementById("mp-doc-div").style.display="none")):document.getElementById("id-card-number").innerHTML=""}function d(e,t){if(200===e){var n=document.getElementById("id-issuers-options"),o=document.createDocumentFragment();n.options.length=0;e=new Option(l.select_choose,"-1");o.appendChild(e);for(var d=0;d<t.length;d++){var r="default"===t[d].name?"Otro":t[d].name;o.appendChild(new Option(r,t[d].id))}n.appendChild(o),n.removeAttribute("disabled"),$("body").on("change","#id-issuers-options",c)}else p()}function c(){for(var e={},t=document.getElementById("amount").value,n=!1,o=0;o<r.additional_info_needed.length;o++)"issuer_id"===r.additional_info_needed[o]&&(n=!0);if(n){var d=document.getElementById("id-issuers-options").value,e={bin:s(),amount:t,issuer_id:d};if("-1"===d)return}else e={bin:s(),amount:t};Mercadopago.getInstallments(e,a)}function a(e,t){if(u(),200===e){var n=new Option(l.select_choose,"",!0,!0);$("#id-installments").append(n);for(var o=[],d=0;d<t.length;d++)"aggregator"===t[d].processing_mode&&(o=t[d].payer_costs);for(var r=0;r<o.length;r++)(n=new Option(o[r].recommended_message||o[r].installments,o[r].installments)).setAttribute("data-tax",function(e){var t="";if("MLA"!==i.site_id)return t;for(var n=0;n<e.length;n++)-1!==e[n].indexOf("CFT_")&&(t=e[n]);return t}(o[r].labels)),$("#id-installments").append(n);"MLA"===i.site_id&&(y(),$("body").on("change","#id-installments",m))}else u(),y()}function m(){var e,t,n=document.querySelector("#id-installments");0<n.options.length?(t=e="",null!==(n=n.options[n.selectedIndex].getAttribute("data-tax"))&&(e=(n=n.split("|"))[0].replace("_"," "),t=n[1].replace("_"," "),"CFT 0,00%"===e&&"TEA 0,00%"===t&&(t=e="")),document.querySelector(".mp-text-cft").innerHTML=e,document.querySelector(".mp-text-tea").innerHTML=t):"SPAN"===document.querySelector("#uniform-id-installments").children[0].tagName&&(document.querySelector("#uniform-id-installments").children[0].innerHTML="")}function s(){return $("#id-card-number").val().replace(/ /g,"").replace(/-/g,"").replace(/\./g,"").substr(0,6)}function u(){document.getElementById("id-installments").innerHTML=""}function y(){document.querySelector(".mp-text-cft").innerHTML="",document.querySelector(".mp-text-tea").innerHTML=""}function p(){document.getElementById("container-issuers").style.display="none",document.getElementById("container-installments").classList.remove("col-md-8"),document.getElementById("container-installments").classList.add("mp-md-12"),document.getElementById("id-issuers-options").innerHTML=""}function f(){_();var e=function(){for(var e=!1,t=h(),n=t.querySelectorAll("[data-checkout]"),o=["cardNumber","cardExpiration","securityCode","installments"],d=0;d<n.length;d++){var r,i=n[d];-1<o.indexOf(i.getAttribute("data-checkout"))&&(-1!==i.value&&""!==i.value||(0<(r=t.querySelectorAll('small[data-main="#'+i.id+'"]')).length&&(r[0].style.display="block"),i.classList.add("mp-form-control-error"),e=!0))}return e||e}(),t=function(){var e=!1;o.issuer&&(-1!==(t=document.getElementById("id-issuers-options")).value&&""!==t.value||(t.classList.add("mp-form-control-error"),e=!0));{var t;o.cardholder_name&&(-1!==(t=document.getElementById("id-card-holder-name")).value&&""!==t.value||(t.classList.add("mp-form-control-error"),e=!0))}o.cardholder_identification_type&&(-1!==(n=document.getElementById("id-docType")).value&&""!==n.value||(n.classList.add("mp-form-control-error"),e=!0));{var n;o.cardholder_identification_number&&(-1!==(n=document.getElementById("id-doc-number")).value&&""!==n.value||(n.classList.add("mp-form-control-error"),document.getElementById("mp-error-324").style.display="inline-block",e=!0))}return e||e}();if(!e&&!t)return 1;g()}function g(){void 0!==document.querySelectorAll(".mp-form-control-error")&&document.querySelectorAll(".mp-form-control-error")[0].focus()}function v(e,t){200!==e&&201!==e?function(e){for(var t=h(),n=0;n<e.cause.length;n++){var o=e.cause[n],d="";void 0!==(d="208"===o.code||"209"===o.code||"325"===o.code||"326"===o.code?t.querySelector("#mp-error-208"):t.querySelector("#mp-error-"+o.code))&&(o=t.querySelector(d.getAttribute("data-main")),d.style.display="block",o.classList.add("mp-form-control-error"))}g(),b()}(t):(document.querySelector("#card_token_id").value=t.id,document.forms.mp_custom_checkout.submit())}function _(){for(var e=0;e<document.querySelectorAll("[data-checkout]").length;e++){var t=document.querySelectorAll("[data-checkout]")[e];t.classList.remove("mp-error-input"),t.classList.remove("mp-form-control-error")}for(var n=0;n<document.querySelectorAll(".mp-erro-form").length;n++)document.querySelectorAll(".mp-erro-form")[n].style.display="none"}function h(){return document.querySelector("#mp_custom_checkout")}function b(){var e=document.getElementById("conditions_to_approve[terms-and-conditions]");return"object"==typeof e&&null!==e&&(e.checked=!1)}window.initializeCustom=function(e){i.site_id=e.site_id,l.select_choose=e.select_choose,t=e.ps_version},jQuery(function(){$('input[data-checkout="cardNumber"]').on("focusout",e),void 0!==document.forms.mp_custom_checkout&&(document.forms.mp_custom_checkout.onsubmit=function(){return f()?("six"===(e=t)?document.getElementById("mp-custom-finish-order").setAttribute("disabled","disabled"):"seven"===e&&document.getElementById("payment-confirmation").childNodes[1].childNodes[1].setAttribute("disabled","disabled"),function(){_();var e=h();return Mercadopago.createToken(e,v),!1}()):(b(),!1);var e}),$("#uniform-id-docType").removeClass("selector"),$("#uniform-id-installments").removeClass("selector")})}();