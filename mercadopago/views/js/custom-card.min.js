/**
 * 2007-2025 PrestaShop
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to http://www.prestashop.com for more information.
 *
 *  @author    PrestaShop SA <contact@prestashop.com>
 *  @copyright 2007-2025 PrestaShop SA
 *  @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 *  International Registered Trademark & Property of PrestaShop SA
 *
 * Don't forget to prefix your containers with your own identifier
 * to avoid any conflicts with others containers.
 */
!function(){var e={},t={site_id:"",public_key:""},n="",d=null,o=null,r=null,i=!1;function c(){return document.getElementById("amount").value}function l(){document.querySelector(".mp-text-cft").innerHTML="",document.querySelector(".mp-text-tea").innerHTML=""}function a(){s(),l(),document.getElementById("id-card-number").style.background="no-repeat #fff",document.getElementById("id-card-expiration").value="",document.getElementById("id-doc-number").value="",document.getElementById("id-security-code").value="",document.getElementById("id-card-holder-name").value=""}function u(e){for(var t=p(),n=e.cause||e,d=0;d<n.length;d++){var o=n[d].code,r=void 0;void 0!==(r="208"===o||"209"===o||"325"===o||"326"===o?t.querySelector("#mp-error-208"):t.querySelector("#mp-error-"+o))&&(r.style.display="block",t.querySelector(r.getAttribute("data-main")).classList.add("mp-form-control-error"))}m(),y()}function m(){void 0!==document.querySelectorAll(".mp-form-control-error")&&document.querySelectorAll(".mp-form-control-error")[0].focus()}function s(){for(var e=0;e<document.querySelectorAll("[data-checkout]").length;e++){document.querySelectorAll("[data-checkout]")[e].classList.remove("mp-form-control-error")}for(var t=0;t<document.querySelectorAll(".mp-erro-form").length;t++){document.querySelectorAll(".mp-erro-form")[t].style.display="none"}}function y(){var e=document.getElementById("conditions_to_approve[terms-and-conditions]");if("object"==typeof e&&null!==e)return e.checked=!1,e.checked}function p(){return document.querySelector("#mp_custom_checkout")}function f(){s();var t=function(){for(var e=!1,t=p(),n=t.querySelectorAll("[data-checkout]"),d=["cardNumber","cardholderName","cardExpiration","securityCode","installments"],o=0;o<n.length;o++){var r=n[o];if(d.indexOf(r.getAttribute("data-checkout"))>-1&&(-1===r.value||""===r.value)){var i=t.querySelectorAll('small[data-main="#'+r.id+'"]');i.length>0&&(i[0].style.display="block"),r.classList.add("mp-form-control-error"),e=!0}}return e}(),n=function(){var t=!1;if(e.issuer){var n=document.getElementById("id-issuers-options");-1!==n.value&&""!==n.value||(n.classList.add("mp-form-control-error"),t=!0)}if(e.cardholder_name){var d=document.getElementById("id-card-holder-name");-1!==d.value&&""!==d.value||(d.classList.add("mp-form-control-error"),t=!0)}if(e.cardholder_identification_type){var o=document.getElementById("id-docType");-1!==o.value&&""!==o.value||(o.classList.add("mp-form-control-error"),t=!0)}if(e.cardholder_identification_number){var r=document.getElementById("id-doc-number");-1!==r.value&&""!==r.value||(r.classList.add("mp-form-control-error"),document.getElementById("mp-error-324").style.display="inline-block",t=!0)}return t}();return!t&&!n||(m(),!1)}window.initializeCustom=function(m){t.site_id=m.site_id,t.public_key=m.public_key,n=m.ps_version,d=new MercadoPago(t.public_key),o=d.cardForm({amount:c(),autoMount:!0,processingMode:"aggregator",form:{id:"mp_custom_checkout",cardNumber:{id:"id-card-number"},cardholderName:{id:"id-card-holder-name"},cardExpirationMonth:{id:"id-card-expiration-month"},cardExpirationYear:{id:"id-card-expiration-year"},securityCode:{id:"id-security-code"},installments:{id:"id-installments"},identificationType:{id:"id-docType"},identificationNumber:{id:"id-doc-number"},issuer:{id:"id-issuers-options"}},callbacks:{onFormMounted:function(e){if(e)return console.warn("Form Mounted handling error: ",e)},onIdentificationTypesReceived:function(e,t){if(e)return console.warn("identificationTypes handling error: ",e)},onPaymentMethodsReceived:function(t,n){if(t)return console.warn("paymentMethods handling error: ",t);var o,i,c,u=n[0].payment_type_id;a(),o=n[0].thumbnail,(i=document.getElementById("id-card-number")).style.background="url("+o+") 98% 50% no-repeat #fff",i.style.backgroundSize="auto 24px",c=n[0].settings[0].security_code.length,r=c,function(e){document.querySelector("#payment_type_id").value=e}(u),"debit_card"===u?document.getElementById("id-installments").setAttribute("disabled","disabled"):document.getElementById("id-installments").removeAttribute("disabled"),function(t){e={issuer:!1,cardholder_name:!1,cardholder_identification_type:!1,cardholder_identification_number:!1};for(var n=0;n<t.length;n++)"issuer_id"===t[n]&&(e.issuer=!0),"cardholder_name"===t[n]&&(e.cardholder_name=!0),"cardholder_identification_type"===t[n]&&(e.cardholder_identification_type=!0),"cardholder_identification_number"===t[n]&&(e.cardholder_identification_number=!0)}(n[0].additional_info_needed),e.cardholder_name?document.getElementById("mp-card-holder-div").style.display="block":document.getElementById("mp-card-holder-div").style.display="none",e.issuer?(document.getElementById("container-issuers").style.display="block",document.getElementById("container-installments").classList.remove("col-md-12"),document.getElementById("container-installments").classList.add("col-md-8")):(document.getElementById("container-issuers").style.display="none",document.getElementById("container-installments").classList.remove("col-md-8"),document.getElementById("container-installments").classList.add("mp-md-12"),document.getElementById("id-issuers-options").innerHTML="",l()),e.cardholder_identification_type?(document.getElementById("mp-doc-div-title").style.display="block",document.getElementById("mp-doc-div").style.display="block",document.getElementById("mp-doc-type-div").style.display="block",d.getIdentificationTypes()):document.getElementById("mp-doc-type-div").style.display="none",e.cardholder_identification_number?(document.getElementById("mp-doc-div-title").style.display="block",document.getElementById("mp-doc-div").style.display="block",document.getElementById("mp-doc-number-div").style.display="block"):document.getElementById("mp-doc-number-div").style.display="none",e.cardholder_identification_type||e.cardholder_identification_number||(document.getElementById("mp-doc-div-title").style.display="none",document.getElementById("mp-doc-div").style.display="none")},onIssuersReceived:function(e,t){if(e)return console.warn("issuers handling error: ",e)},onInstallmentsReceived:function(e,n){if(e)return console.warn("installments handling error: ",e);var d,o;d=t.site_id,o=n.payer_costs,"MLA"===d&&(l(),document.querySelector("#id-installments").addEventListener("change",(function(e){!function(e){for(var t=document.querySelector("#id-installments"),n=0;n<e.length;n++)if(e[n].installments===t.value){var d=e[n].labels[0].split("|"),o=d[0].replace("_"," "),r=d[1].replace("_"," ");"CFT 0,00%"===o&&"TEA 0,00%"===r&&(o="",r=""),document.querySelector("#mp-tax-cft-text").innerHTML=o,document.querySelector("#mp-tax-tea-text").innerHTML=r}}(o)})))},onCardTokenReceived:function(e,t){if(e)return u(e),console.warn("Token handling error: ",e);!function(e){var t,d,c;if(t=p().querySelectorAll('small[data-main="#id-security-code"]'),d=document.getElementById("id-security-code"),(c=r===d.value.length)||(t[0].style.display="block",d.classList.add("mp-form-control-error"),d.focus(),y()),c)if(e)u(e);else if(!i){var l=o.getCardFormData();document.querySelector("#card_token_id").value=l.token,document.querySelector("#mp_issuer").value=l.issuerId,document.querySelector("#mp_installments").value=l.installments,document.querySelector("#payment_method_id").value=l.paymentMethodId,i=!0,function(e){if("six"===e)document.getElementById("mp-custom-finish-order").setAttribute("disabled","disabled");else if("seven"===e){var t=document.querySelector("#payment-confirmation button");t&&t.setAttribute("disabled","disabled")}}(n),document.forms.mp_custom_checkout.submit()}}(e)}}}),document.getElementById("id-card-expiration").addEventListener("change",(function(e){var t=document.getElementById("id-card-expiration").value,n=" "|t.split("/")[0],d=" "|t.split("/")[1];document.getElementById("id-card-expiration-month").value=("0"+n).slice(-2),document.getElementById("id-card-expiration-year").value=d})),document.getElementById("id-card-number").addEventListener("keyup",(function(e){e.target.value.length<=4&&a()}))},jQuery((function(){void 0!==document.forms.mp_custom_checkout&&(document.forms.mp_custom_checkout.onsubmit=function(){return f()?(o.createCardToken(),!1):(y(),!1)})}))}();
